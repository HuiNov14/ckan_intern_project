{% extends "page.html" %}
{% block page_title %}

{% endblock %}
{% block breadcrumb_content_selected %}


{% endblock %}

{% block breadcrumb_content %}
{% snippet 'user/snippets/breadcrumd_statistical.html' %}
  <li class="statistical">
    <a href="/dashboard/statistical/resource-dashboard">{{ _('Resource Statistics') }}</a>
  </li>
  <li class="active">
    <a href="/dashboard/statistical/statistical-api">{{ _('API Statistics') }}</a>
  </li>
{% endblock %}

{% block secondary %}{% endblock %}
{% block primary %}

{% asset 'api_tracking/statistical_api-js' %}
{% asset 'api_tracking/statistical_api-css' %}


<div class="container my-4 px-3">
  <div class="container rounded ">
    <div class="d-flex justify-content-between">
      <h4 class="mb-4">{{ _("Filter API Datasets") }}</h4>
      <div class="col-md-4">
        {% snippet 'user/snippets/filter_chart_statistical.html' %}
      </div>
    </div>
    <hr class="mt-3" />
    <form class="formCss" id="tracking-form" action="{{ url_for('tracking_blueprint.statistical_api') }}" method="post">
      <h4 class="mb-4">{{_("Filter API Datasets")}}</h4>
      
      <div class="row mb-3">
          <div class="col-md-6">
              <label for="start_date" class="form-label">{{_("Start Date")}}</label>
              <input type="date" id="start_date" name="start_date" class="form-control" style="line-height: 2.5;" value="{{ start_date }}" max="{{ today }}">
              <div id="start-date-error" class="text-danger mt-1"></div>
          </div>
          <div class="col-md-6">
              <label for="end_date" class="form-label">{{_("End Date")}}</label>
              <input type="date" id="end_date" name="end_date" class="form-control" style="line-height: 2.5;" value="{{ end_date }}" max="{{ today }}">
              <div id="end-date-error" class="text-danger mt-1"></div>
          </div>
      </div>
  
      <div class="row mb-3">
        <div class="col-md-6">
            <label for="creator_select" class="form-label">{{ _("User Name") }}</label>
            <select name="creator_select" id="creator_select" class="form-control select2" style="line-height: 2.5;">
                {% if static_api and static_api.creators is defined and static_api.creators is iterable %}
                    {% for user in static_api.creators %}
                        <option value="{{ user.value }}" {% if user.value == creator_select %}selected{% endif %}>
                            {{ user.text }}
                        </option>
                    {% endfor %}
                {% endif %}
            </select>
        </div>
        
        </div>
      
      <div class="text-end">
          <button type="submit" class="btn btn-primary px-4">{{_("Filter")}}</button>
      </div>
    </form>
  </div>

  {% snippet 'user/snippets/sort_chart_statistical.html' %}
</div>
</div>
</div>
<script>
  {% if static_api is not undefined and static_api is not none %}
      window.trackingData = {{ static_api | tojson }};
  {% else %}
      window.trackingData = [];
  {% endif %}
</script>
  {% endblock %} 